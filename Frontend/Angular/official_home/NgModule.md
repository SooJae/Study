일반적으로 기능 모듈은 다음 5가지 종류로 구분할 수 있습니다:

# 도메인 모듈 (Domain feature modules)

도메인 기능 모듈은 애플리케이션을 사용하는 사용자에게 필요한 기능을 제공하는 모듈입니다. 고객 정보를 수정하거나 상품을 주문하는 것이 이런 기능에 해당됩니다.
이 모듈은 보통 최상위 private 컴포넌트 하나로 시작해서 복잡한 자식 컴포넌트들로 구성됩니다.

그리고 도메인 기능 모듈에는 모듈에 포함된다고 등록하는 컴포넌트나 디렉티브, 파이프가 가장 많으며, 이 중 최상위 컴포넌트만 모듈 외부로 공개하는 방식으로 사용됩니다.

도메인 기능 모듈에는 프로바이더를 거의 지정하지 않습니다. 만약 이 모듈에 프로바이더가 지정되면, 이 프로바이더를 사용해서 만든 서비스는 모듈이 종료되면서 함께 종료됩니다.

도메인 기능 모듈은 좀 더 큰 기능 모듈에 로드되기도 합니다.

개발하는 애플리케이션의 규모가 작다면, 도메인 기능 모듈은 라우팅 없이 최상위 AppModule에 직접 로드되기도 합니다.

# 라우팅 대상 모듈 (Routed feature modules)
모듈의 최상위 컴포넌트가 라우터 네비게이션의 대상인 모듈이며, 도메인 기능 모듈에 해당한다고 볼 수도 있습니다.
지연 로딩되는 모듈은 모두 이 분류에 해당됩니다.

이 모듈에 포함되는 컴포넌트는 외부 컴포넌트의 템플릿에 사용되는 경우가 절대 없기 때문에, 이 모듈은 아무것도 모듈 외부로 공개하지 않습니다.

이 모듈이 지연 로딩된다면 다른 모듈에서는 이 모듈을 로드하는 일이 없어야 합니다. 왜냐하면 다른 모듈에서 이 모듈을 로드하면 그 모듈이 로드될 때 이 모듈도 즉시 로드 되면서, 지연 로딩 모듈로 지정한 의미가 없어지기 때문입니다. 따라서 이 모듈은 지연 로딩되지 않을 때만 AppModule이나 다른 모듈의 imports 배열에 지정되어야 합니다.

지연 로딩되는 기능 모듈에서 설명하는 이유 때문에, 라우팅 대상 모듈에는 서비스 프로바이더를 지정하는 경우가 가끔 있습니다. 이렇게 되면 이 프로바이더로 생성하는 서비스의 생명주기는 모듈의 생명주기와 동일합니다. 따라서 애플리케이션 전역에 사용되는 싱글턴 서비스는 라우팅 대상 모듈에 추가되면 안됩니다.

# 라우팅 모듈 (Routing modules)
라우팅 모듈은 모듈끼리 연결할 때 필요한 라우터 설정을 따로 모아서 라우터 설정 기능만 한번에 제공하는 모듈입니다.

라우팅 모듈은 다음과 같은 역할을 합니다:

라우팅 규칙을 정의합니다.
라우팅 규칙을 모듈에 로드합니다.
라우팅 가드(guard)나 라우팅 리졸버(resolver)를 서비스 프로바이더 목록에 등록합니다.
라우팅 모듈의 이름은 관련 모듈 이름 뒤에 "Routing" 접미사를 붙이는 것이 좋습니다. 예를 들면, FooModule이 foo.module.ts 파일에 정의되어 있다면, 라우팅 모듈은 foo-routing.module.ts 파일에 FooRoutingModule이라고 선언하는 방식입니다. 이때 라우팅하는 모듈이 AppModule이라면, 라우팅 모듈의 이름은 AppRoutingModule라고 하고 RouterModule.forRoot(routes)에 라우팅 규칙을 등록하면 됩니다. 앱모듈이 아닌 라우팅 모듈에서는 RouterModule.forChild(routes)를 대신 사용합니다.
라우팅 모듈은 RouterModule을 모듈 외부로 공개하는데, 이렇게 하면 관련 모듈의 컴포넌트에서 RouterLink나 RouterOutlet와 같은 라우터 디렉티브를 자유롭게 사용할 수 있습니다.
라우팅 모듈에는 이 모듈에 포함되는 컴포넌트나 디렉티브, 파이프를 등록하지 않습니다. 이 구성요소들은 기능 모듈의 역할에 해당되며, 라우팅 모듈과는 관련이 없습니다.
라우팅 모듈은 라우팅하는 담당하는 모듈에만 로드되어야 합니다.

# 서비스 모듈 (Service feature modules)
서비스 모듈은 서버에 데이터를 요청하거나 메시지를 보내는 등의 유틸리티 기능을 제공하는 모듈입니다. 그리고 이 모듈은 컴포넌트나 디렉티브, 파이프 없이 서비스에 대한 프라바이더만 등록되어 있는 것이 이상적입니다. Angular 기본 모듈 중 HttpClientModule이 서비스 모듈에 해당됩니다.

서비스 모듈은**최상위 AppModule에만 로드**되어야 합니다.

# 위젯 모듈 (Widget feature modules)
위젯 모듈은 **다른 모듈에서 사용하는 컴포넌트, 디렉티브, 파이프**로 구성됩니다. 대다수의 **서드파티 UI 컴포넌트 라이브러리도 위젯 모듈**이라고 볼 수 있습니다.

위젯 모듈은 대부분 컴포넌트나 디렉티브, 파이프를 등록하는 것으로 구성되며, 이렇게 등록된 구성요소는 대부분 모듈 외부로 공개됩니다.

위젯 모듈에 서비스 프로바이더를 지정하는 경우는 거의 없습니다.

위젯 모듈은 이 모듈의 구성요소를 사용하려는 모듈 어디에라도 로드해서 사용할 수 있습니다.



# @NgModule의 목적
NgModule을 사용하면 Angular 애플리케이션의 코드를 효율적으로 구성할 수 있으며, 이 때 @NgModule 데코레이터를 사용합니다. 이 데코레이터의 메타데이터는 세종류로 나눠 볼 수 있습니다:

**정적(static) 설정**: 컴파일러가 모듈을 빌드할 때 알아야 할 디렉티브를 등록합니다. declarations 배열이 해당됩니다.
**런타임(runtime) 설정**: 모듈이 실행될 때 의존성을 주입해야 한다면, providers 배열로 인젝터를 설정합니다.
**그룹화(grouping) 설정**: 다른 NgModule과 조합하기 위해 imports, exports 배열을 설정합니다.