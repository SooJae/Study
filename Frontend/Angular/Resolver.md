서버를 여러 번 호출하여 프로그램을 개발하면 버그가 많아질 수 있습니다. 여러분이 이 글을 본다면, API 호출의 지연으로 어려움을 겪었다는 의미입니다. 이러한 지연으로 인해 좋지않은 UX가 발생할 수 있습니다. 
오늘은 Angular의 Route Resolvers를 이해하려고합니다. 진행률 표시기와 같이 사용자 경험을 향상시키기 위해 수행 할 수있는 몇몇 작업들이 있습니다. 
우선, Route Resolver가 무엇이며 이를 통해 무엇을 달성 할 수 있는지 살펴 보겠습니다.

앵귤러 루트 리졸버란?
Resolver는 Angular Router의 Resolve 인터페이스를 구현하는 클래스입니다. 실제로 Resolver는 루트 모듈에서 제공해야하는 서비스입니다. 
기본적으로 Resolver는 미들웨어처럼 작동하며 구성 요소를 로드하기 전에 실행할 수 있습니다.



다음 포스팅 또한 리졸버를  : Angular Resolvers(https://dzone.com/articles/angular-resolvers) .

Angular에서 루트 리졸버를 사용하는 이유?
Angular 에서 리졸버를 사용하는 방법을 설명하기 위해 하나의 시나리오를 생각해 보자. 
*ngIf="some condition"로직은 API 호출이 완료 될 때 조작되는 배열의 길이에 의존한다. 
예를 들어, 정렬되지 않은 목록에서 가져온이 배열의 항목을 구성 요소에 표시 할 수 있습니다.

```js

```

이 경우 구성 요소가 준비된 후 데이터가 표시되므로 문제가 발생할 수 있습니다. 배열의 항목이 아직 존재하지 않습니다. 여기서 Route Resolver가 유용합니다. Angular의 Route Resolver 클래스는 구성 요소가 준비되기 전에 데이터를 가져옵니다. 조건문은 Resolver와 원활하게 작동합니다.

인터페이스 해결
라우트 리졸버를 구현하기 전에 먼저 Resolve 인터페이스가 어떻게 보이는지 봅시다.

```js

```
Route Resolver를 만들려면 위의 인터페이스를 구현할 새 클래스를 만들어야합니다. 이 인터페이스는 resolve 필요한 경우 두 가지 매개 변수를 얻는 기능을 제공  합니다. 첫 번째 유형 인 경로이며  ActivatedRouteSnapshot,  상기 두번째 유형은, 상태이다  RouterStateSnapshot. 여기서 컴포넌트를로드하기 전에 필요한 데이터를 가져 오는 API 호출을 만들 수 있습니다.

경로 매개 변수를 통해 API 호출에 사용될 수있는 경로 매개 변수를 얻을 수 있습니다. 이  resolve  메소드는 Observable, promise 또는 사용자 정의 유형을 리턴 할 수 있습니다  .

참고 :이 방법을 통해 확인 된 데이터 만 반환된다는 점을 언급해야합니다. 

리졸버를 처음 사용할 때 많은 사람들이 저지르는 실수입니다! 따라서 라우터로 보내기 전에 완료해야합니다.

리졸버를 통해 라우터로 데이터 전송
위 섹션에서 의미하는 바를 보여 드리겠습니다. 옵저버 블을 반환하는 메서드가 있다고 가정 해 봅시다.
```js

```
이제 우리가 가진 구독이 절대로 맞지 않는 것을 볼 수 있습니다. 데이터를 올바르게 보내지 않기 때문입니다. 가입이 완료되지 않았습니다. 이 오류를 해결하려면 코드를 한 줄 더 추가하여 구독을 완료해야합니다.
```js

```
약속을 반환하는 경우 데이터를 라우터로 보내기 전에 약속을 해결해야합니다.

라우트 리졸버 구현
기본 설명과 라우트 리졸버를 사용하는 이유와 방법을 모두 마치고 구현을 시작하겠습니다. 이 짧은 예에서는 Angular의 CLI 명령 과 새 프로젝트를 만드는 방법에 익숙하다고 가정 하므로 필수 코드 만 보여 드리겠습니다. 기사 끝에서 GitHub 리포지토리를 통해 데모 프로젝트를 찾을 수 있습니다.

이 예제에서는 jsonplaceholder 를 가짜 API로 사용하여 사용자 데이터를 가져 와서 경로 확인자를 사용한 API 호출을 보여줍니다.

우선, 사용자 데이터를 가져 오는 서비스가 필요합니다. 이 서비스 getUsers() 에는 Observable을 반환하는 함수가 있습니다 .

```js

```
getUsers 함수를 구독하지 않아야합니다. UserResolver라는 경로 확인자가이를 처리합니다. 다음 단계는 라우터의 Resolve 인터페이스의 해결 기능을 구현할 UserResolver라는 새 서비스를 만드는 것입니다.
```js

```
이 서비스  UserResolver는 getUsers 옵저버 블을 자동으로 구독  하고 가져온 데이터를 라우터에 제공합니다. 오류가 발생하면 데이터를 가져 오는 동안 비어있는 관찰 가능 항목을 보낼 수 있으며 라우터는 경로로 진행하지 않습니다.

이 시점에서 탐색이 종료됩니다. 이 마지막 단계는 사용자가 /users 경로에 갈 때 호출 될 컴포넌트를 작성하는 것  입니다. 일반적으로 리졸버가 없으면 ngOnInit 구성 요소 의 후크 에서 데이터를 페치하고  '데이터 없음'으로 인한 오류를 처리해야합니다. 사용자의 구성 요소는 간단합니다. 단지 사용자의 데이터를 가져 와서  ActivatedRoute 순서가없는 목록으로 표시합니다.

사용자 구성 요소를 만든 후에는 경로를 정의하고 라우터에게 확인자 ( UserResolver) 를 사용하도록 지시해야합니다  . 이것은 다음 코드를 사용하여 달성 할 수 있습니다   app-routing.modulte.ts.
```js

```
resolve 속성을 사용자 경로에 설정하고을 선언해야합니다  UserResolver. 데이터는 users라는 속성을 가진 객체로 전달됩니다. 그 후에는 거의 끝났습니다. 당신이해야 할 한 가지가 있습니다. ActivatedRoute 다음 코드 를 통해 가져온 데이터를 사용자 구성 요소로 가져와야  합니다.
```js

```
그런 다음 구성 요소가로드되기 전에 데이터가 있으므로 *ngIf 명령문 (  *ngIf=”users && users.length > 0 ) 없이 HTML로 표시 할 수 있습니다  .
```js

```

요약
Route Resolvers에 대한이 기사를 마치면서 그들이 제공하는 이점을 다시 한 번 지적하고 싶습니다. 먼저 데이터를받을 때까지 문제가 발생하지 않도록 HTML 수준에서 수행해야하는 성가신 점검을 피합니다. 둘째, 프리뷰 컴포넌트를로드하지 않고도 데이터를 가져 오는 동안 데이터 오류가 발생하면 탐색을 중지 할 수 있으므로 사용자 경험에 더 집중할 수 있습니다. 로드 된 구성 요소에 액세스하기 전에 더 많은 논리를 연결하거나 데이터를 매핑하는 등 탐색을 완료하기 전에 더 많은 작업을 수행 할 수도 있습니다.

데모 코드는 GitHub 에서 구할 수 있습니다 .

https://dzone.com/articles/understanding-angular-route-resolvers-by-example
